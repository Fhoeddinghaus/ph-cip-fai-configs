#!/bin/bash

error=0; trap 'error=$(($?>$error?$?:$error))' ERR # save maximum error code

#####################################################################
# Create compphys account on clients with custom password

name="compphys"
pass="uPfprcVnGqPw."	# hash function of password generated by openssl passwd

$ROOTCMD useradd -p "$pass" -g cip -d "/home/$name" -s /bin/bash -c "Temporary Computational Physics account, please save your data onto external media" "$name"

# make /scratch writable for everyone
$ROOTCMD chmod 777 $target/scratch
# create user directory
$ROOTCMD mkdir $target/scratch/$name
$ROOTCMD chown $name:cip $target/scratch/$name


exit $error
